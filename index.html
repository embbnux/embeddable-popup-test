<!DOCTYPE html>
<html>
<body>
<script>
  // Add widget
  (function() {
    var rcs = document.createElement("script");
    rcs.src = "https://ringcentral.github.io/ringcentral-embeddable/adapter.js?enablePopup=1&multipleTabsSupport=1&popupPageUri=https://embbnux.github.io/embeddable-popup-test/rcPopup.html";
    var rcs0 = document.getElementsByTagName("script")[0];
    rcs0.parentNode.insertBefore(rcs, rcs0);
  })();
</script>
<script>
  async function openPopupWindow() {
    var rcAdapter = RCAdapter;
    const isOpened = await rcAdapter.isWindowPoppedUp();
    if (!isOpened) {
        rcAdapter.popupWindow()
    }
  }
  window.addEventListener('message', function (e) {
    const data = e.data;
    if (data && data.type === 'rc-login-status-notify') {
      openPopupWindow();
    }
  })
</script>
</body>
</html>